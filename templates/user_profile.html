{% extends 'base.html' %}
{% block content %}

<!-- Other User's Profile -->

<h1>{{ user.username }}'s Posts</h1>



<div class="profile-sec">
    <div class="profile-heading">
        <div class="profile-title">
            <div class="profile-img">
                {% if user.profile_picture %}
                <img src="{{ url_for('static', filename='profile_pictures/' + user.profile_picture) }}">
                {% else %}
                <img src="{{ url_for('static', filename='images/blank-profile-pic.png') }}">
                {% endif %}
            </div>
            
            <h3>{{ user.username }}</h3>
        </div>
        <div class="profile-detail">
            <div class="profile-about">
                <p>Lorem, ipsum dolor sit amet consectetur adipisicing elit. Quos perspiciatis fugit porro reprehenderit delectus officia ipsum dicta neque voluptate consequuntur mollitia magnam, ab cumque repudiandae nisi numquam totam possimus? Rem.</p>
                <div class="profile-follow">
                    <h4>Followers: {{ followers|length }}</h4>
                    <h4>Following: {{ followed|length }}</h4>
                    <div>
                        <!-- Follow unfollow -->
                        {% if current_user != user %}
                        {% if current_user.is_following(user) %}
                        <form action="{{ url_for('unfollow', user_id=user.id) }}" method="POST">
                            <button class="btn-follow" type="submit">Unfollow</button>
                        </form>
                        {% else %}
                        <form action="{{ url_for('follow', user_id=user.id) }}" method="POST">
                            <button class="btn-follow" type="submit">Follow</button>
                        </form>
                        {% endif %}
                        {% endif %}

                    </div>
                </div>
            </div>

        </div>

    </div>
</div>



<!-- SHOWE POSTs -->

            {% for post in posts %}
            <div class="user-post">
                <div class="content">

                
                    <div class="title">
                        {% if post.user.profile_picture %}
                        <img src="{{ url_for('static', filename='profile_pictures/' + post.user.profile_picture) }}">
                        {% else %}
                        <img src="{{ url_for('static', filename='images/blank-profile-pic.png') }}">
                        {% endif %}

                        <a href="#" onclick="return false;">
                        <h3>{{ post.user.username }}</h3>
                        <p style="font-size: xx-small; color: dimgray;">{{ post.created_at.strftime('%H:%M Â· %B %Y') }} </p>
                        </a>
                        
                    </div>
                    



                    <div class="post-body">
                        <p class="p-body">{{ post.body }}</p>

                        {% if post.post_picture %}
                            <img src="{{ url_for('static', filename='post_pictures/' + post.post_picture) }}">
                        {% endif %} 
                        


                        <div class="comment-icon">


                            <a href="#" class="like-button" data-post-id="{{ post.id }}" {% if current_user and post in current_user.liked_posts %}class="liked"{% endif %} onclick="likePost(event, this); return false;">
                                <span class="likes-wrapper">
                                    {% if post.likes == 1 %}
                                        <span class="heart-emoji red-heart"><span class="material-icons-sharp">
                                            favorite_border
                                        </span></span>
                                    {% else %}
                                        <span class="heart-emoji empty-heart"><span class="material-icons-sharp">
                                            favorite_border
                                        </span></span>
                                    {% endif %}
                                <span class="likes-count">{{ post.likes }}</span>
                                </span>
                            </a>



                            {% if current_user != user %}
                            
                            <a href="{{ url_for('show_post', post_id=post.id) }}">
                                <span class="material-icons-sharp">
                                    chat_bubble_outline
                                </span>
                                <p>63</p>
                            </a>




                            <a href="#">
                                <span class="material-icons-sharp">
                                    more_horiz
                                    </span>
                                <p>{{ post.created_at.strftime('%B %Y') }} </p>
                            </a>

                            {% else %}

                            <a href="{{ url_for('show_post', post_id=post.id) }}">
                                <span class="material-icons-sharp">
                                    chat_bubble_outline
                                </span>
                                <p>{{ post.comments|length }}</p>
                            </a>




                            <a href="{{url_for('edit_post', post_id=post.id)}}">
                                <span class="material-icons-sharp">
                                    edit_note
                                    </span>
                                <p>Edit</p>
                            </a>

                            <a href="{{url_for('delete_post', post_id=post.id)}}">
                                <span class="material-icons-sharp">
                                    delete
                                    </span>
                                <p>delete </p>
                            </a>

                            {% endif %}
                            
                        </div>
                    </div>
                </div>

            </div>
{% endfor %}

{% endblock %}